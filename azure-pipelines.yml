trigger:
- main

pool:
  name: default

steps:
- script: |
    $JiraUrl = "https://your-jira-instance.atlassian.net/rest/api/2/issue/"
    $JiraUsername = "your-jira-username"
    $JiraToken = "your-jira-api-token"

    $Headers = @{
        Authorization = "Basic " + [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes("$($JiraUsername):$($JiraToken)"))
        ContentType = "application/json"
    }

    $RequestBody = @{
        fields = @{
            project = @{
                key = "YOURPROJECT"
            }
            summary = "Your task summary"
            description = "Your task description"
            issuetype = @{
                name = "Task"
            }
        }
    } | ConvertTo-Json

    $response = Invoke-RestMethod -Uri $JiraUrl -Headers $Headers -Method Post -Body $RequestBody

    Write-Host "Jira response:"
    $response
  displayName: 'Creaci√≥n Task Jira'